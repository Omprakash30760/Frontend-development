<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Registration Form</title>
  <style>
    .error {
      color: red;
      font-size: 14px;
      margin-left: 10px;
    }
  </style>
  <script>
    function validateForm(event) {
      event.preventDefault(); // Prevent form submission

      // Clear previous error messages
      let errorSpans = document.querySelectorAll('.error');
      errorSpans.forEach(span => span.innerHTML = '');

      let isValid = true;

      let fullname = document.forms["myForm"]["fname"].value.trim();
      let username = document.forms["myForm"]["username"].value.trim();
      let password = document.forms["myForm"]["password"].value;
      let confirmPassword = document.forms["myForm"]["confirmPassword"].value;
      let email = document.forms["myForm"]["email"].value.trim();
      let mobile = document.forms["myForm"]["mobile"].value.trim();
      let dob = document.forms["myForm"]["dob"].value;
      let gender = document.querySelector('input[name="gender"]:checked');
      let address = document.forms["myForm"]["address"].value.trim();
      let pincode = document.forms["myForm"]["pincode"].value.trim();

      // Full Name validation
      if (fullname === "") {
        document.getElementById("nameError").innerHTML = "Full Name is required.";
        isValid = false;
      }

      // Username only alphabets
      let userRegex = /^[A-Za-z]+$/;
      if(!userRegex.test(username)){
        document.getElementById("usernameError").innerHTML = "Only alphabets allowed in username.";
        isValid = false;
      }

      // Password validation: min 8 characters, 1 uppercase, 1 lowercase, 1 number, 1 special character
      let passRegex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/;
      if(!passRegex.test(password)){
        document.getElementById("passwordError").innerHTML =
          "Password must be at least 8 characters long and include uppercase, lowercase, number, and special character.";
        isValid = false;
      }

      // Confirm Password validation
      if(password !== confirmPassword){
        document.getElementById("confirmPasswordError").innerHTML = "Passwords do not match.";
        isValid = false;
      }

      // Email validation
      let emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,3}$/;
      if(!emailRegex.test(email)){
        document.getElementById("emailError").innerHTML = "Please enter a valid email address.";
        isValid = false;
      }

      // Mobile validation
      let mobileRegex = /^[6-9][0-9]{9}$/;
      if(!mobileRegex.test(mobile)){
        document.getElementById("mobileError").innerHTML = "Please enter a valid 10-digit mobile number starting with 6-9.";
        isValid = false;
      }

      // DOB validation: must be selected & age >= 18
      if(dob === ""){
        document.getElementById("dobError").innerHTML = "Date of Birth is required.";
        isValid = false;
      } else {
        let birthDate = new Date(dob);
        let today = new Date();
        let age = today.getFullYear() - birthDate.getFullYear();
        let monthDiff = today.getMonth() - birthDate.getMonth();
        if(monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())){
          age--;
        }
        if(age < 18){
          document.getElementById("dobError").innerHTML = "You must be at least 18 years old.";
          isValid = false;
        }
      }

      // Gender: must be selected
      if(!gender){
        document.getElementById("genderError").innerHTML = "Please select gender.";
        isValid = false;
      }

      // Address: minimum 10 characters
      if(address.length < 10){
        document.getElementById("addressError").innerHTML = "Address must be at least 10 characters long.";
        isValid = false;
      }

      // Pincode: must be 6-digit number
      let pinRegex = /^\d{6}$/;
      if(!pinRegex.test(pincode)){
        document.getElementById("pincodeError").innerHTML = "Please enter a valid 6-digit pincode.";
        isValid = false;
      }

      // If all validations pass, submit the form
      if(isValid){
        alert("Form submitted successfully!");
        document.forms["myForm"].submit();
      }
    }
  </script>
</head>
<body>
  <h2>Registration Form</h2>
  <form name="myForm" onsubmit="validateForm(event)">
    <label>Full Name: </label>
    <input type="text" name="fname">
    <span id="nameError" class="error"></span><br><br>

    <label>Username: </label>
    <input type="text" name="username">
    <span id="usernameError" class="error"></span><br><br>

    <label>Password: </label>
    <input type="password" name="password">
    <span id="passwordError" class="error"></span><br><br>

    <label>Confirm Password: </label>
    <input type="password" name="confirmPassword">
    <span id="confirmPasswordError" class="error"></span><br><br>

    <label>Email: </label>
    <input type="text" name="email">
    <span id="emailError" class="error"></span><br><br>

    <label>Mobile: </label>
    <input type="text" name="mobile">
    <span id="mobileError" class="error"></span><br><br>

    <label>Date of Birth: </label>
    <input type="date" name="dob">
    <span id="dobError" class="error"></span><br><br>

    <label>Gender: </label>
    <input type="radio" name="gender" value="Male"> Male
    <input type="radio" name="gender" value="Female"> Female
    <input type="radio" name="gender" value="Other"> Other
    <span id="genderError" class="error"></span><br><br>

    <label>Address: </label>
    <textarea name="address"></textarea>
    <span id="addressError" class="error"></span><br><br>

    <label>Pincode: </label>
    <input type="text" name="pincode">
    <span id="pincodeError" class="error"></span><br><br>

    <input type="submit" value="Register">
  </form>
</body>
</html>
